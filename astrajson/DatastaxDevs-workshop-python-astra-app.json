{
    "key": "DatastaxDevs-workshop-python-astra-app",
    "tags": [
        "cassandra",
        "python",
        "fastapi",
        "workshop",
        "nosql",
        "gitpod",
        "astradb"
    ],
    "urls": {
        "github": "https://github.com/datastaxdevs/workshop-python-astra-app",
        "heroimage": "https://raw.githubusercontent.com/datastaxdevs/workshop-python-astra-app/main/images/python_nosql_workshop.png",
        "youtube": [
            "https://www.youtube.com/watch?v=ENvr1ssphlg"
        ]
    },
    "last_modified": "Mon, 30 Jan 2023 19:57:30 GMT",
    "forks_count": 1,
    "stargazers_count": 0,
    "name": "Learn how to build out Python DALs, work with NoSQL DBs, and expose Python methods as restful endpoints.",
    "duration": "2 hours",
    "skilllevel": "Intermediate",
    "language": [
        "python"
    ],
    "likes": "46",
    "views": "2293",
    "usecases": [
        "sales",
        "employees"
    ],
    "readme": "<h1>Get Started on Python and NoSQL with Apache Cassandra</h1>\n<img src=\"images/python_nosql_workshop.png?raw=true\" />\n<h2>\ud83d\udccb Table of contents</h2>\n<ol>\n<li><a href=\"#1-introduction\">Introduction</a></li>\n<li><a href=\"#2-database-setup\">Database Setup</a></li>\n<li><a href=\"#3-gitpod-setup\">GitPod - Dev Environment Setup</a></li>\n<li><a href=\"#4-simple-demos\">Simple Demos</a></li>\n<li><a href=\"#5-sales-data-generator\">Sales Data Generator</a></li>\n<li><a href=\"#6-whats-next\">What's NEXT ?</a></li>\n</ol>\n<h2>1. Introduction</h2>\n<p>In this workshop you will learn about building small Python applications to load and query data, while using DataStax Astra DB as its data storage layer.</p>\n<h2>2. Database Setup</h2>\n<p>For this workshop you will need an Astra DB instance.  You will be able to create one and use it for free.  If you already have an Astra DB instance, you can certainly use that.</p>\n<p><em>In case you haven't created your Astra DB cluster yet, go ahead and create it now (for free) by clicking here:</em></p>\n<p><a href=\"https://astra.dev/yt-02-11\"><img src=\"images/create_astra_db_button.png?raw=true\" /></a></p>\n<ul>\n<li>Database Name: <code>workshops</code></li>\n<li>Keyspace Name: <code>sales</code></li>\n</ul>\n<p><strong>Note</strong>: the Token that is created with the database does not have all permissions we need, so you <em>need</em> to manually <a href=\"https://awesome-astra.github.io/docs/pages/astra/create-token/\">create a Token</a> with the higher &quot;DB Administrator&quot; permission and use it in what comes next.</p>\n<p><em>If you have a database named <code>workshops</code> but not a <code>sales</code> keyspace,<br />\nsimply add it using the &quot;Add Keyspace&quot; button on the bottom right hand corner of your DB dashboard.</em></p>\n<h4>Astra DB &quot;Administrator&quot; token</h4>\n<p>If you do not have a &quot;DB Administrator&quot; token yet, log in to your Astra DB<br />\nand create a token with the &quot;Database Administrator&quot; role.<br />\nTo create the token, click on the &quot;...&quot; menu next to your database in the main<br />\nAstra dashboard and choose &quot;Generate token&quot;. Then make sure you select the &quot;Database Administrator&quot; role.<br />\n<em>Download or note down all components of the token before navigating away:<br />\nthese will not be shown again.</em><br />\n<a href=\"https://awesome-astra.github.io/docs/pages/astra/create-token/\">See here</a><br />\nfor more on token creation.</p>\n<blockquote>\n<p><strong>\u26a0\ufe0f Important</strong></p>\n<pre><code>The instructor will show the token creation on screen,\nbut will then destroy it immediately for security reasons.\n</code></pre>\n</blockquote>\n<p>Remember, as mentioned already, <em>the default Token auto-created for you when<br />\ncreating the database is not powerful enough for us today.</em></p>\n<h2>3. GitPod Setup</h2>\n<p>First, open this repo in Gitpod by right-clicking the following button (select &quot;open in new tab&quot;):</p>\n<p><a href=\"https://gitpod.io/#https://github.com/datastaxdevs/workshop-python-astra-loader\"><img src=\"images/open_in_gitpod.svg?raw=true\" /></a></p>\n<p>In a couple of minutes you will have your Gitpod IDE up and running, with this repo cloned, ready and waiting for you (you may have to authorize the Gitpod single-sign-on to continue).</p>\n<p><em>Note</em>: The next steps are to be executed <em>within the Gitpod IDE.</em></p>\n<h3>3a. Install and configure the Astra CLI</h3>\n<p>In a console within Gitpod, provide the &quot;token proper&quot; part of the Token (the string starting with <code>AstraCS:...</code>) by running:</p>\n<pre><code>. ~/.bashrc ; astra setup\n</code></pre>\n<p>You will be prompted to paste your Astra token.  Remember, that token needs &quot;Database Administrator&quot; permissions.  The default, auto-generated token will not work.</p>\n<p><em>(Optional)</em> If the above step was successful, try getting some information on your Astra DB by executing the following commands:</p>\n<pre><code>astra db list\n</code></pre>\n<pre><code>astra db list-keyspaces workshops\n</code></pre>\n<pre><code>astra db get workshops\n</code></pre>\n<h3>3b. Download the Secure Connect Bundle</h3>\n<p>The driver also need the &quot;Secure Connect Bundle&quot; zipfile to work (it contains proxy and routing information as well as the necessary certificates).</p>\n<p>To download it:</p>\n<pre><code>astra db download-scb -f secure-connect-workshops.zip workshops\n</code></pre>\n<p>You can check it has been saved with <code>ls *.zip</code>.</p>\n<h3>3c. Configure the dot-env file</h3>\n<p>Copy the template dot-env and edit it with:</p>\n<pre><code>cp .env.sample .env ; gp open .env\n</code></pre>\n<p>Replace the Client ID and Client Secret strings from the database Token.</p>\n<p>Finally, <code>source</code> the .env file:</p>\n<pre lang=\"bash\"><code>source .env\n</code></pre>\n<p>You can verify that your environment variables have been appropriately sourced by executing:</p>\n<pre lang=\"bash\"><code>env | grep ASTR",
    "_id": "DatastaxDevs-workshop-python-astra-app",
    "readme_markdown": "# Get Started on Python and NoSQL with Apache Cassandra\n\n<img src=\"images/python_nosql_workshop.png?raw=true\" />\n\n## \ud83d\udccb Table of contents\n\n1. [Introduction](#1-introduction)\n2. [Database Setup](#2-database-setup)\n3. [GitPod - Dev Environment Setup](#3-gitpod-setup)\n4. [Simple Demos](#4-simple-demos)\n5. [Sales Data Generator](#5-sales-data-generator)\n6. [What's NEXT ?](#6-whats-next)\n\n## 1. Introduction\n\nIn this workshop you will learn about building small Python applications to load and query data, while using DataStax Astra DB as its data storage layer.\n\n## 2. Database Setup\n\nFor this workshop you will need an Astra DB instance.  You will be able to create one and use it for free.  If you already have an Astra DB instance, you can certainly use that.\n\n_In case you haven't created your Astra DB cluster yet, go ahead and create it now (for free) by clicking here:_\n\n<a href=\"https://astra.dev/yt-02-11\"><img src=\"images/create_astra_db_button.png?raw=true\" /></a>\n\n - Database Name: `workshops`\n - Keyspace Name: `sales`\n\n**Note**: the Token that is created with the database does not have all permissions we need, so you _need_ to manually [create a Token](https://awesome-astra.github.io/docs/pages/astra/create-token/) with the higher \"DB Administrator\" permission and use it in what comes next.\n\n_If you have a database named `workshops` but not a `sales` keyspace,\nsimply add it using the \"Add Keyspace\" button on the bottom right hand corner of your DB dashboard._\n\n#### Astra DB \"Administrator\" token\n\nIf you do not have a \"DB Administrator\" token yet, log in to your Astra DB\nand create a token with the \"Database Administrator\" role.\nTo create the token, click on the \"...\" menu next to your database in the main\nAstra dashboard and choose \"Generate token\". Then make sure you select the \"Database Administrator\" role.\n_Download or note down all components of the token before navigating away:\nthese will not be shown again._\n[See here](https://awesome-astra.github.io/docs/pages/astra/create-token/)\nfor more on token creation.\n\n> **\u26a0\ufe0f Important**\n> ```\n> The instructor will show the token creation on screen,\n> but will then destroy it immediately for security reasons.\n> ```\n\nRemember, as mentioned already, _the default Token auto-created for you when\ncreating the database is not powerful enough for us today._\n\n## 3. GitPod Setup\n\nFirst, open this repo in Gitpod by right-clicking the following button (select \"open in new tab\"):\n\n<a href=\"https://gitpod.io/#https://github.com/datastaxdevs/workshop-python-astra-loader\"><img src=\"images/open_in_gitpod.svg?raw=true\" /></a>\n\nIn a couple of minutes you will have your Gitpod IDE up and running, with this repo cloned, ready and waiting for you (you may have to authorize the Gitpod single-sign-on to continue).\n\n_Note_: The next steps are to be executed _within the Gitpod IDE._\n\n### 3a. Install and configure the Astra CLI\n\nIn a console within Gitpod, provide the \"token proper\" part of the Token (the string starting with `AstraCS:...`) by running:\n\n```\n. ~/.bashrc ; astra setup\n```\n\nYou will be prompted to paste your Astra token.  Remember, that token needs \"Database Administrator\" permissions.  The default, auto-generated token will not work.\n\n_(Optional)_ If the above step was successful, try getting some information on your Astra DB by executing the following commands:\n\n```\nastra db list\n```\n```\nastra db list-keyspaces workshops\n```\n```\nastra db get workshops\n```\n\n### 3b. Download the Secure Connect Bundle\n\nThe driver also need the \"Secure Connect Bundle\" zipfile to work (it contains proxy and routing information as well as the necessary certificates).\n\nTo download it:\n\n```\nastra db download-scb -f secure-connect-workshops.zip workshops\n```\n\nYou can check it has been saved with `ls *.zip`.\n\n### 3c. Configure the dot-env file\n\nCopy the template dot-env and edit it with:\n\n```\ncp .env.sample .env ; gp open .env\n```\n\nReplace the Client ID and Client Secret strings from the database Token.\n\nFinally, `source` the .env file:\n\n```bash\nsource .env\n```\n\nYou can verify that your environment variables have been appropriately sourced by executing:\n\n ```bash\n env | grep ASTRA\n ```\n\n### 3d. Cassandra Python driver\n\nFor these examples to work, the Cassandra Python driver will need to be installed.  The GitPod instance has automatically taken care of that, and you can verify it from a terminal with the following command:\n\n```\npip show cassandra-driver\n```\n\n## 4. Simple Demos\n\nTo verify that we've done everything correctly so far, let's run a couple simple scripts.  First, make sure you're in the `21_SimpleDemos` directory:\n\n### 4a. Python scripts\n\n```\ncd 21_SimpleDemos\n```\n\nNow, execute the getCassClusterInfo.py script:\n\n```\npython getCassClusterInfo.py\n```\n\nThat should show you some simple properties about your Astra DB cluster:\n\n```\n% python getCassClusterInfo.py\nConnected to cndb and it is running 4.0.0.6816 version.\nDone.\n```\n\nNext, let's build a table and load a few rows of data.  If you like"
}